{"version":3,"file":"component---src-pages-case-studies-list-js-32f9ce579b58e8f646d5.js","mappings":"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","sources":["webpack://digital-twin-atlas/./src/images/marker-icon.png","webpack://digital-twin-atlas/./src/images/marker-icon-selected.png","webpack://digital-twin-atlas/./src/components/Map.js","webpack://digital-twin-atlas/./src/pages/case-studies-list.js"],"sourcesContent":["export default __webpack_public_path__ + \"static/marker-icon-41f2877e7936742908d3294c0414c7ac.png\";","export default __webpack_public_path__ + \"static/marker-icon-selected-df3c9f2d24f2ceee720bfa6e488759fc.png\";","import React, { useEffect, useState } from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\nimport markerIcon from '../images/marker-icon.png';\r\nimport selectedMarkerIcon from '../images/marker-icon-selected.png';\r\nimport { Link } from 'gatsby';\r\n\r\nconst mapboxToken = process.env.GATSBY_MAPBOX_API_KEY || \"pk.eyJ1IjoicmVhbHRpbWVsYWIiLCJhIjoiY2x6cWUyYmNkMGNyNzJxcTg5ZHB3cmM3aCJ9.GxeOk3BD74C7ElBQZZCguw\";\r\n\r\nconst Map = ({ caseStudies }) => {\r\n  const [map, setMap] = useState(null);\r\n  const [selectedStudy, setSelectedStudy] = useState(null);\r\n  const [highlightedMarker, setHighlightedMarker] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!map) {\r\n      mapboxgl.accessToken = mapboxToken;\r\n\r\n      const initializeMap = new mapboxgl.Map({\r\n        container: 'map',\r\n        style: 'mapbox://styles/realtimelab/clznlra4y00a001qgan7xdk3p',\r\n        center: [43.098681, 32.072086],\r\n        zoom: 3.5,\r\n        bearing: 0,\r\n        pitch: 0,\r\n      });\r\n\r\n      caseStudies.forEach(study => {\r\n        const markerElement = document.createElement('div');\r\n        markerElement.className = 'marker';\r\n        markerElement.style.backgroundImage = `url(${markerIcon})`;\r\n        markerElement.style.width = '32px';\r\n        markerElement.style.height = '32px';\r\n        markerElement.style.backgroundSize = '100%';\r\n        markerElement.style.cursor = 'pointer';\r\n\r\n        const marker = new mapboxgl.Marker(markerElement)\r\n          .setLngLat([study.lng, study.lat])\r\n          .addTo(initializeMap);\r\n\r\n        markerElement.addEventListener('click', () => {\r\n          if (highlightedMarker && highlightedMarker !== markerElement) {\r\n            highlightedMarker.style.backgroundImage = `url(${markerIcon})`;\r\n          }\r\n\r\n          markerElement.style.backgroundImage = `url(${selectedMarkerIcon})`;\r\n          setHighlightedMarker(markerElement);\r\n          setSelectedStudy(study);\r\n        });\r\n      });\r\n\r\n      setMap(initializeMap);\r\n    }\r\n\r\n    return () => {\r\n      if (map) map.remove();\r\n    };\r\n  }, [caseStudies, map]);\r\n\r\n  const closePopup = () => {\r\n    if (highlightedMarker) {\r\n      highlightedMarker.style.backgroundImage = `url(${markerIcon})`;\r\n      setHighlightedMarker(null);\r\n    }\r\n    setSelectedStudy(null);\r\n  };\r\n\r\n  const truncateText = (text, maxLength) => {\r\n    if (!text) return '';  // Return an empty string if text is undefined or null\r\n    if (text.length <= maxLength) return text;\r\n    return text.substr(0, maxLength) + '...';\r\n  };\r\n\r\n  return (\r\n    <div style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%' }}>\r\n      <div id=\"map\" style={{ width: '100%', height: '100%' }} />\r\n      {selectedStudy && (\r\n        <div className=\"popup\" style={{\r\n          position: 'absolute',\r\n          top: '50%',\r\n          left: '50%',\r\n          transform: 'translate(-50%, -50%)',\r\n          backgroundColor: 'var(--card-background-color)',\r\n          padding: 'var(--space-3)',\r\n          borderRadius: 'var(--border-radius)',\r\n          boxShadow: '0 4px 10px rgba(0, 0, 0, 0.3)',\r\n          zIndex: 10,\r\n          maxWidth: '300px',\r\n          textAlign: 'center',\r\n          color: 'var(--text-color)',\r\n          fontSize: 'var(--font-md)',\r\n          lineHeight: 'var(--line-height-normal)'\r\n        }}>\r\n          <h2 style={{ fontSize: '1.5rem', marginBottom: 'var(--space-2)', color: 'var(--heading-color)' }}>{selectedStudy.name}</h2>\r\n          <p style={{ marginBottom: 'var(--space-1)' }}><strong>Location:</strong> {selectedStudy.location}, {selectedStudy.country}</p>\r\n          <p style={{ marginBottom: 'var(--space-1)' }}><strong>Start Year:</strong> {selectedStudy['Start Year']}</p>\r\n          <p style={{ marginBottom: 'var(--space-1)' }}><strong>Creators:</strong> {selectedStudy.Creators}</p>\r\n          <p style={{ marginBottom: 'var(--space-3)' }}>\r\n            <span className=\"fade-text\">\r\n              <strong>Description:</strong> {truncateText(selectedStudy.Description, 50)}\r\n              {selectedStudy.Description && selectedStudy.Description.length > 50 && (\r\n                <span style={{\r\n                  position: 'absolute',\r\n                  right: 0,\r\n                  bottom: 0,\r\n                  width: '2em',\r\n                  height: '1.2em',\r\n                  background: 'linear-gradient(to right, rgba(255, 255, 255, 0) 0%, var(--card-background-color) 100%)'\r\n                }}></span>\r\n              )}\r\n            </span>\r\n          </p>\r\n          <Link to={`/case-studies/${selectedStudy.id}`} style={{\r\n            display: 'inline-block',\r\n            marginBottom: 'var(--space-3)',\r\n            padding: 'var(--space-2) var(--space-3)',\r\n            backgroundColor: 'var(--button-background-color)',\r\n            color: 'var(--button-text-color)',\r\n            borderRadius: 'var(--border-radius)',\r\n            textDecoration: 'none',\r\n            transition: 'background-color 0.3s ease',\r\n          }}\r\n          onMouseEnter={(e) => e.target.style.backgroundColor = 'var(--button-hover-background-color)'}\r\n          onMouseLeave={(e) => e.target.style.backgroundColor = 'var(--button-background-color)'}\r\n          >Learn more</Link>\r\n          <button onClick={closePopup} style={{\r\n            position: 'absolute',\r\n            top: '10px',\r\n            right: '10px',\r\n            background: 'none',\r\n            border: 'none',\r\n            fontSize: '1.5rem',\r\n            cursor: 'pointer',\r\n            color: 'var(--text-color)',\r\n          }}>✖</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Map;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { Link } from 'gatsby';\r\nimport HamburgerMenu from '../components/HamburgerMenu';\r\nimport caseStudies from '../data/caseStudies';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  ArcElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from 'chart.js';\r\nimport { Bar, Pie } from 'react-chartjs-2';\r\nimport '../styles/CaseStudiesList.css';\r\nimport defaultImage from '../images/case-studies/case-study.jpg';\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\nimport Map from '../components/Map'; // Import the Map component\r\n//import caseStudies from '../data/caseStudies'; // Import the data\r\n\r\n// Register required Chart.js components\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  ArcElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\nconst itemsPerPage = 12; // Number of case studies to load initially and on each scroll\r\n\r\nconst CaseStudiesList = () => {\r\n  const [sortOption, setSortOption] = useState('alphabetical');\r\n  const [sortOrder, setSortOrder] = useState('asc');\r\n  const [shortListFilter, setShortListFilter] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [visibleCaseStudies, setVisibleCaseStudies] = useState(itemsPerPage);\r\n  const [filters, setFilters] = useState({\r\n    country: '',\r\n    status: '',\r\n  });\r\n  const loadMoreRef = useRef();\r\n\r\n  const handleFilterChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFilters({ ...filters, [name]: value });\r\n  };\r\n\r\n  // Only access getComputedStyle in browser environment\r\n  let primaryColor, secondaryColor, accentColor1, accentColor2, accentColor3;\r\n  if (typeof window !== 'undefined') {\r\n    primaryColor = getComputedStyle(document.documentElement).getPropertyValue('--primary-color').trim();\r\n    secondaryColor = getComputedStyle(document.documentElement).getPropertyValue('--secondary-color').trim();\r\n    accentColor1 = getComputedStyle(document.documentElement).getPropertyValue('--accent-color-1').trim();\r\n    accentColor2 = getComputedStyle(document.documentElement).getPropertyValue('--accent-color-2').trim();\r\n    accentColor3 = getComputedStyle(document.documentElement).getPropertyValue('--accent-color-3').trim();\r\n  }\r\n\r\n  const sortedCaseStudies = [...caseStudies]\r\n    .filter(study =>\r\n      (shortListFilter ? study.shortList === 'Yes' : true) &&\r\n      (searchQuery === '' || study.name.toLowerCase().includes(searchQuery.toLowerCase())) &&\r\n      (filters.country === '' || study.country === filters.country) &&\r\n      (filters.status === '' || study.FinalStatus === filters.status)\r\n    )\r\n    .sort((a, b) => {\r\n      const order = sortOrder === 'asc' ? 1 : -1;\r\n      switch (sortOption) {\r\n        case 'alphabetical':\r\n          return order * a.name.localeCompare(b.name);\r\n        case 'city':\r\n          return order * a.location.localeCompare(b.location);\r\n        case 'country':\r\n          return order * a.country.localeCompare(b.country);\r\n        case 'area':\r\n          return order * (parseFloat(b['Total Area (km2)']) - parseFloat(a['Total Area (km2)']));\r\n        case 'startYear':\r\n          return order * (a['Start Year'] - b['Start Year']);\r\n        case 'status':\r\n          return order * a.FinalStatus.localeCompare(b.FinalStatus);\r\n        default:\r\n          return 0;\r\n      }\r\n    });\r\n\r\n  const paginatedCaseStudies = sortedCaseStudies.slice(0, visibleCaseStudies);\r\n\r\n  // Load more items when scrolling reaches the bottom\r\n  useEffect(() => {\r\n    const observer = new IntersectionObserver((entries) => {\r\n      if (entries[0].isIntersecting) {\r\n        setVisibleCaseStudies((prev) => Math.min(prev + itemsPerPage, sortedCaseStudies.length));\r\n      }\r\n    });\r\n\r\n    if (loadMoreRef.current) {\r\n      observer.observe(loadMoreRef.current);\r\n    }\r\n\r\n    return () => {\r\n      if (loadMoreRef.current) {\r\n        observer.unobserve(loadMoreRef.current);\r\n      }\r\n    };\r\n  }, [sortedCaseStudies]);\r\n\r\n  // Data for Charts\r\n  const countryData = {\r\n    labels: [...new Set(caseStudies.map(study => study.country))],\r\n    datasets: [\r\n      {\r\n        label: 'Number of Projects by Country',\r\n        data: [...new Set(caseStudies.map(study => study.country))].map(country =>\r\n          caseStudies.filter(study => study.country === country).length\r\n        ),\r\n        backgroundColor: secondaryColor ? `${secondaryColor}B3` : 'rgba(52, 152, 219, 0.7)', // Fallback color\r\n        borderColor: secondaryColor || 'rgba(52, 152, 219, 1)', // Fallback color\r\n        borderWidth: 1,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const statusData = {\r\n    labels: ['Completed', 'In Progress', 'Failed', 'Did Not Start'],\r\n    datasets: [\r\n      {\r\n        label: 'Project Status Distribution',\r\n        data: [\r\n          caseStudies.filter(study => study.FinalStatus === 'Completed').length,\r\n          caseStudies.filter(study => study.FinalStatus === 'In Progress').length,\r\n          caseStudies.filter(study => study.FinalStatus === 'Failed').length,\r\n          caseStudies.filter(study => study.FinalStatus === 'Did Not Start').length,\r\n        ],\r\n        backgroundColor: [\r\n          accentColor1 ? `${accentColor1}B3` : 'rgba(46, 204, 113, 0.7)', // Fallback color\r\n          primaryColor ? `${primaryColor}B3` : 'rgba(52, 152, 219, 0.7)', // Fallback color\r\n          accentColor3 ? `${accentColor3}B3` : 'rgba(231, 76, 60, 0.7)', // Fallback color\r\n          accentColor2 ? `${accentColor2}B3` : 'rgba(155, 89, 182, 0.7)', // Fallback color\r\n        ],\r\n        borderColor: [\r\n          accentColor1 || 'rgba(46, 204, 113, 1)', // Fallback color\r\n          primaryColor || 'rgba(52, 152, 219, 1)', // Fallback color\r\n          accentColor3 || 'rgba(231, 76, 60, 1)', // Fallback color\r\n          accentColor2 || 'rgba(155, 89, 182, 1)', // Fallback color\r\n        ],\r\n        borderWidth: 1,\r\n      },\r\n    ],\r\n  };\r\n\r\n  return (\r\n\r\n    // Main Container\r\n    <div style={{ padding: '20px', maxWidth: '1200px', margin: '0 auto' }}>\r\n      \r\n      {/* Menu */}\r\n      <HamburgerMenu />\r\n      \r\n      {/* Heading */}\r\n      <h1>Case Studies</h1>\r\n\r\n      {/* Filters Section */}\r\n      <div className=\"controls sticky-filters\">\r\n        <div className=\"filters-group\">\r\n          <div className=\"filter-controls\">\r\n            <label>Filters:</label>\r\n            <select name=\"country\" value={filters.country} onChange={handleFilterChange}>\r\n              <option value=\"\">Country: All</option>\r\n              {[...new Set(caseStudies.map(study => study.country))].map(country => (\r\n                <option key={country} value={country}>{country}</option>\r\n              ))}\r\n            </select>\r\n            <select name=\"status\" value={filters.status} onChange={handleFilterChange}>\r\n              <option value=\"\">Status: All</option>\r\n              <option value=\"Completed\">Completed</option>\r\n              <option value=\"In Progress\">In Progress</option>\r\n              <option value=\"Failed\">Failed</option>\r\n              <option value=\"Did Not Start\">Did Not Start</option>\r\n            </select>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"search-bar\"\r\n            placeholder=\"Search case studies...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"sort-toggle-group\">\r\n          <div className=\"toggle-switch\">\r\n            <label className=\"toggle-label\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={shortListFilter}\r\n                onChange={(e) => setShortListFilter(e.target.checked)}\r\n              />\r\n              <span className=\"slider\"></span>\r\n              <span className=\"toggle-text\">Short List Only</span>\r\n            </label>\r\n          </div>\r\n\r\n          <div className=\"toggle-button\">\r\n            <button onClick={() => setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc')}>\r\n              {sortOrder === 'asc' ? 'Ascending' : 'Descending'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Charts Section */}\r\n      <div className=\"charts\">\r\n\r\n        <div className=\"chart-wrapper\">\r\n          <h3 className=\"chart-title\">Project Status Distribution</h3>\r\n          <div className=\"chart-container\">\r\n            <Pie data={statusData} options={{ maintainAspectRatio: false }} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"chart-wrapper\">\r\n          <h3 className=\"chart-title\">Projects by Country</h3>\r\n          <div className=\"chart-container\">\r\n            <Bar data={countryData} options={{ maintainAspectRatio: false }} />\r\n          </div>\r\n        </div>\r\n\r\n      {/* Case Studies Grid */}\r\n      <div className=\"case-studies-grid\">\r\n        {paginatedCaseStudies.map((study) => (\r\n          <div className=\"card case-study-card\" key={study.id}>\r\n            <Link to={`/case-studies/${study.id}`}>\r\n              <h3 className=\"card-title\">{study.name}</h3>\r\n              <div className=\"image-container\">\r\n                <img\r\n                  src={study.imagePath || defaultImage}\r\n                  alt={study.name}\r\n                  className=\"duotone img\"\r\n                />\r\n                {study.shortList === 'Yes' && <span className=\"shortlist-tag\">Short Listed</span>}\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <ul className=\"details-list\">\r\n                  \r\n                  <li><strong>Country:</strong> {study.country || 'N/A'}</li>\r\n                  <li><strong>City:</strong> {study.location || 'N/A'}</li>\r\n                  <li><strong>Creators:</strong> {study['Creators'] || 'N/A'}</li>\r\n                  <li><strong>Total Area:</strong> {study['Total Area (km2)'] || 'N/A'} km²</li>\r\n                  <li><strong>Platform/Organization:</strong> {study['Platform/Organization'] || 'N/A'}</li>\r\n                  <li><strong>System Digital Twinned:</strong> {study['System Digital Twinned'] || 'N/A'}</li>\r\n                  <li><strong>3D Platform Features:</strong> {study['3D Platform Features'] || 'N/A'}</li>\r\n\r\n                  <li><span style={{ color: study.FinalStatus === 'Completed' ? 'green' : study.FinalStatus === 'In Progress' ? 'orange' : 'red' }}>\r\n                    <strong>Status: </strong>\r\n                    \r\n                      {study.FinalStatus || 'N/A'}\r\n                    </span>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </Link>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n\r\n      {/* Load More Indicator */}\r\n      <div ref={loadMoreRef} style={{ height: '50px', marginTop: '20px' }}></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CaseStudiesList;\r\n"],"names":["mapboxToken","process","GATSBY_MAPBOX_API_KEY","caseStudies","map","setMap","useState","selectedStudy","setSelectedStudy","highlightedMarker","setHighlightedMarker","useEffect","mapboxgl","initializeMap","container","style","center","zoom","bearing","pitch","forEach","study","markerElement","document","createElement","className","backgroundImage","markerIcon","width","height","backgroundSize","cursor","setLngLat","lng","lat","addTo","addEventListener","selectedMarkerIcon","remove","position","top","left","id","transform","backgroundColor","padding","borderRadius","boxShadow","zIndex","maxWidth","textAlign","color","fontSize","lineHeight","marginBottom","name","location","country","Creators","text","Description","maxLength","length","substr","right","bottom","background","Link","to","display","textDecoration","transition","onMouseEnter","e","target","onMouseLeave","onClick","border","ChartJS","register","CategoryScale","LinearScale","BarElement","ArcElement","Title","Tooltip","Legend","sortOption","setSortOption","sortOrder","setSortOrder","shortListFilter","setShortListFilter","searchQuery","setSearchQuery","visibleCaseStudies","setVisibleCaseStudies","filters","setFilters","status","loadMoreRef","useRef","handleFilterChange","value","primaryColor","secondaryColor","accentColor1","accentColor2","accentColor3","window","getComputedStyle","documentElement","getPropertyValue","trim","sortedCaseStudies","filter","shortList","toLowerCase","includes","FinalStatus","sort","a","b","order","localeCompare","parseFloat","paginatedCaseStudies","slice","observer","IntersectionObserver","entries","isIntersecting","prev","Math","min","current","observe","unobserve","countryData","labels","Set","datasets","label","data","borderColor","borderWidth","statusData","margin","onChange","key","type","placeholder","checked","options","maintainAspectRatio","src","imagePath","defaultImage","alt","ref","marginTop"],"sourceRoot":""}