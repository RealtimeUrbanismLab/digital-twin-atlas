{"version":3,"file":"component---src-pages-index-js-c4e56d80ab02e9bd9e14.js","mappings":"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","sources":["webpack://digital-twin-atlas/./src/images/marker-icon.png","webpack://digital-twin-atlas/./src/images/marker-icon-selected.png","webpack://digital-twin-atlas/./src/components/Map.js","webpack://digital-twin-atlas/./src/pages/index.js"],"sourcesContent":["export default __webpack_public_path__ + \"static/marker-icon-41f2877e7936742908d3294c0414c7ac.png\";","export default __webpack_public_path__ + \"static/marker-icon-selected-df3c9f2d24f2ceee720bfa6e488759fc.png\";","import React, { useEffect, useState } from 'react';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\nimport markerIcon from '../images/marker-icon.png';\r\nimport selectedMarkerIcon from '../images/marker-icon-selected.png';\r\nimport { Link } from 'gatsby';\r\n\r\nconst mapboxToken = process.env.GATSBY_MAPBOX_API_KEY || \"pk.eyJ1IjoicmVhbHRpbWVsYWIiLCJhIjoiY2x6cWUyYmNkMGNyNzJxcTg5ZHB3cmM3aCJ9.GxeOk3BD74C7ElBQZZCguw\";\r\n\r\nconst Map = ({ caseStudies }) => {\r\n  const [map, setMap] = useState(null);\r\n  const [selectedStudy, setSelectedStudy] = useState(null);\r\n  const [highlightedMarker, setHighlightedMarker] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!map) {\r\n      mapboxgl.accessToken = mapboxToken;\r\n\r\n      const initializeMap = new mapboxgl.Map({\r\n        container: 'map',\r\n        style: 'mapbox://styles/realtimelab/clznlra4y00a001qgan7xdk3p',\r\n        center: [43.098681, 32.072086],\r\n        zoom: 3.5,\r\n        bearing: 0,\r\n        pitch: 0,\r\n      });\r\n\r\n      caseStudies.forEach(study => {\r\n        const markerElement = document.createElement('div');\r\n        markerElement.className = 'marker';\r\n        markerElement.style.backgroundImage = `url(${markerIcon})`;\r\n        markerElement.style.width = '32px';\r\n        markerElement.style.height = '32px';\r\n        markerElement.style.backgroundSize = '100%';\r\n        markerElement.style.cursor = 'pointer';\r\n\r\n        const marker = new mapboxgl.Marker(markerElement)\r\n          .setLngLat([study.lng, study.lat])\r\n          .addTo(initializeMap);\r\n\r\n        markerElement.addEventListener('click', () => {\r\n          if (highlightedMarker && highlightedMarker !== markerElement) {\r\n            highlightedMarker.style.backgroundImage = `url(${markerIcon})`;\r\n          }\r\n\r\n          markerElement.style.backgroundImage = `url(${selectedMarkerIcon})`;\r\n          setHighlightedMarker(markerElement);\r\n          setSelectedStudy(study);\r\n        });\r\n      });\r\n\r\n      setMap(initializeMap);\r\n    }\r\n\r\n    return () => {\r\n      if (map) map.remove();\r\n    };\r\n  }, [caseStudies, map]);\r\n\r\n  const closePopup = () => {\r\n    if (highlightedMarker) {\r\n      highlightedMarker.style.backgroundImage = `url(${markerIcon})`;\r\n      setHighlightedMarker(null);\r\n    }\r\n    setSelectedStudy(null);\r\n  };\r\n\r\n  const truncateText = (text, maxLength) => {\r\n    if (!text) return '';  // Return an empty string if text is undefined or null\r\n    if (text.length <= maxLength) return text;\r\n    return text.substr(0, maxLength) + '...';\r\n  };\r\n\r\n  return (\r\n    <div style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%' }}>\r\n      <div id=\"map\" style={{ width: '100%', height: '100%' }} />\r\n      {selectedStudy && (\r\n        <div className=\"popup\" style={{\r\n          position: 'absolute',\r\n          top: '50%',\r\n          left: '50%',\r\n          transform: 'translate(-50%, -50%)',\r\n          backgroundColor: 'var(--card-background-color)',\r\n          padding: 'var(--space-3)',\r\n          borderRadius: 'var(--border-radius)',\r\n          boxShadow: '0 4px 10px rgba(0, 0, 0, 0.3)',\r\n          zIndex: 10,\r\n          maxWidth: '300px',\r\n          textAlign: 'center',\r\n          color: 'var(--text-color)',\r\n          fontSize: 'var(--font-md)',\r\n          lineHeight: 'var(--line-height-normal)'\r\n        }}>\r\n          <h2 style={{ fontSize: '1.5rem', marginBottom: 'var(--space-2)', color: 'var(--heading-color)' }}>{selectedStudy.name}</h2>\r\n          <p style={{ marginBottom: 'var(--space-1)' }}><strong>Location:</strong> {selectedStudy.location}, {selectedStudy.country}</p>\r\n          <p style={{ marginBottom: 'var(--space-1)' }}><strong>Start Year:</strong> {selectedStudy['Start Year']}</p>\r\n          <p style={{ marginBottom: 'var(--space-1)' }}><strong>Creators:</strong> {selectedStudy.Creators}</p>\r\n          <p style={{ marginBottom: 'var(--space-3)' }}>\r\n            <span className=\"fade-text\">\r\n              <strong>Description:</strong> {truncateText(selectedStudy.Description, 50)}\r\n              {selectedStudy.Description && selectedStudy.Description.length > 50 && (\r\n                <span style={{\r\n                  position: 'absolute',\r\n                  right: 0,\r\n                  bottom: 0,\r\n                  width: '2em',\r\n                  height: '1.2em',\r\n                  background: 'linear-gradient(to right, rgba(255, 255, 255, 0) 0%, var(--card-background-color) 100%)'\r\n                }}></span>\r\n              )}\r\n            </span>\r\n          </p>\r\n          <Link to={`/case-studies/${selectedStudy.id}`} style={{\r\n            display: 'inline-block',\r\n            marginBottom: 'var(--space-3)',\r\n            padding: 'var(--space-2) var(--space-3)',\r\n            backgroundColor: 'var(--button-background-color)',\r\n            color: 'var(--button-text-color)',\r\n            borderRadius: 'var(--border-radius)',\r\n            textDecoration: 'none',\r\n            transition: 'background-color 0.3s ease',\r\n          }}\r\n          onMouseEnter={(e) => e.target.style.backgroundColor = 'var(--button-hover-background-color)'}\r\n          onMouseLeave={(e) => e.target.style.backgroundColor = 'var(--button-background-color)'}\r\n          >Learn more</Link>\r\n          <button onClick={closePopup} style={{\r\n            position: 'absolute',\r\n            top: '10px',\r\n            right: '10px',\r\n            background: 'none',\r\n            border: 'none',\r\n            fontSize: '1.5rem',\r\n            cursor: 'pointer',\r\n            color: 'var(--text-color)',\r\n          }}>âœ–</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Map;\r\n","import React from 'react';\r\nimport Map from '../components/Map';\r\nimport HamburgerMenu from '../components/HamburgerMenu';\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\nimport caseStudies from '../data/caseStudies'; // Import the data\r\n\r\nconst IndexPage = () => {\r\n  // Access CSS variables\r\n  let secondaryColor;\r\n  if (typeof window !== 'undefined') {\r\n    secondaryColor = getComputedStyle(document.documentElement).getPropertyValue('--secondary-color').trim();\r\n  }\r\n\r\n  return (\r\n    <main style={{ position: 'relative', width: '100vw', height: '100vh' }}>\r\n      <HamburgerMenu />\r\n      <h1 style={{\r\n        position: 'absolute',\r\n        top: '10px',\r\n        left: '50%',\r\n        transform: 'translateX(-50%)',\r\n        fontSize: '3vw', // Responsive font size\r\n        color: secondaryColor || 'black', // Fallback to black if variable is not available\r\n        textShadow: '0 2px 4px rgba(0, 0, 0, 0.1)', // Add shadow for better readability\r\n        zIndex: 10,\r\n        textAlign: 'center',\r\n      }}>\r\n        Global Atlas of Digital Twins\r\n      </h1>\r\n      <Map caseStudies={caseStudies} />\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default IndexPage;\r\n"],"names":["mapboxToken","process","GATSBY_MAPBOX_API_KEY","caseStudies","map","setMap","useState","selectedStudy","setSelectedStudy","highlightedMarker","setHighlightedMarker","useEffect","mapboxgl","initializeMap","container","style","center","zoom","bearing","pitch","forEach","study","markerElement","document","createElement","className","backgroundImage","markerIcon","width","height","backgroundSize","cursor","setLngLat","lng","lat","addTo","addEventListener","selectedMarkerIcon","remove","position","top","left","id","transform","backgroundColor","padding","borderRadius","boxShadow","zIndex","maxWidth","textAlign","color","fontSize","lineHeight","marginBottom","name","location","country","Creators","text","Description","maxLength","length","substr","right","bottom","background","Link","to","display","textDecoration","transition","onMouseEnter","e","target","onMouseLeave","onClick","border","secondaryColor","window","getComputedStyle","documentElement","getPropertyValue","trim","HamburgerMenu","textShadow"],"sourceRoot":""}